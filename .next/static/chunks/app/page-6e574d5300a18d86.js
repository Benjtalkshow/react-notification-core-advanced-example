(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1196:function(e,t,r){Promise.resolve().then(r.bind(r,8964))},8964:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),a=r(2265),i=r(3667);function n(e){let{unreadCount:t,onClick:r,isOpen:i,onClose:n,notifications:o,markAsRead:l,markAllAsRead:c,deleteNotification:d,isLoading:u,error:m}=e,x=(0,a.useRef)(null);(0,a.useEffect)(()=>{function e(e){x.current&&!x.current.contains(e.target)&&n()}return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i,n]);let f=e=>("string"==typeof e?new Date(e):e).toLocaleString(),h=e=>{switch(e){case"success":return"border-l-4 border-green-500";case"warning":return"border-l-4 border-yellow-500";case"error":return"border-l-4 border-red-500";default:return"border-l-4 border-blue-500"}};return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:r,className:"relative p-2 text-gray-700 hover:bg-gray-100 rounded-full","aria-label":"Notifications",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,s.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),t>0&&(0,s.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:t>99?"99+":t})]}),i&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg z-10",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Notifications"}),t>0&&(0,s.jsx)("button",{onClick:()=>c(),className:"text-sm text-blue-500 hover:text-blue-700",children:"Mark all as read"})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:u?(0,s.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading notifications..."}):m?(0,s.jsxs)("div",{className:"p-4 text-center text-red-500",children:["Error: ",m]}):0===o.length?(0,s.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):(0,s.jsx)("ul",{children:o.map(e=>(0,s.jsxs)("li",{className:"p-4 border-b ".concat(e.read?"":"bg-blue-50"," ").concat(h(e.type)),children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.title}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:f(e.timestamp)})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,s.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[!e.read&&(0,s.jsx)("button",{onClick:()=>l(e.id),className:"text-xs text-blue-500 hover:text-blue-700",children:"Mark as read"}),(0,s.jsx)("button",{onClick:()=>d(e.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},e.id))})})]})]})}function o(e){let{notifications:t,groupedNotifications:r,groups:a,markAsRead:i,deleteNotification:n,isLoading:o,error:l}=e,c=e=>("string"==typeof e?new Date(e):e).toLocaleString(),d=e=>{switch(e){case"success":return"border-l-4 border-green-500";case"warning":return"border-l-4 border-yellow-500";case"error":return"border-l-4 border-red-500";default:return"border-l-4 border-blue-500"}},u=e=>{switch(e){case"success":return(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Success"});case"warning":return(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Warning"});case"error":return(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"Error"});default:return(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"Info"})}};return o?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading notifications..."}):l?(0,s.jsxs)("div",{className:"p-8 text-center text-red-500",children:["Error: ",l]}):r&&a?0===a.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No notifications"}):(0,s.jsx)("div",{className:"space-y-6",children:a.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-100 px-4 py-2 font-medium",children:e}),(0,s.jsx)("ul",{className:"divide-y",children:r[e].map(e=>(0,s.jsxs)("li",{className:"p-4 ".concat(e.read?"":"bg-blue-50"," ").concat(d(e.type)),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.title}),u(e.type)]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:c(e.timestamp)})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[!e.read&&(0,s.jsx)("button",{onClick:()=>i(e.id),className:"text-xs text-blue-500 hover:text-blue-700",children:"Mark as read"}),(0,s.jsx)("button",{onClick:()=>n(e.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},e.id))})]},e))}):t?0===t.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No notifications"}):(0,s.jsx)("ul",{className:"border rounded-lg overflow-hidden divide-y",children:t.map(e=>(0,s.jsxs)("li",{className:"p-4 ".concat(e.read?"":"bg-blue-50"," ").concat(d(e.type)),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.title}),u(e.type)]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:c(e.timestamp)})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[!e.read&&(0,s.jsx)("button",{onClick:()=>i(e.id),className:"text-xs text-blue-500 hover:text-blue-700",children:"Mark as read"}),(0,s.jsx)("button",{onClick:()=>n(e.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},e.id))}):null}function l(e){let{filterByType:t,filterByReadStatus:r,resetFilters:a,countsByType:i,currentFilters:n}=e;return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:n.type||"",onChange:e=>t(e.target.value||void 0),className:"px-3 py-2 border rounded text-sm",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),(0,s.jsxs)("option",{value:"info",children:["Info (",i.info||0,")"]}),(0,s.jsxs)("option",{value:"success",children:["Success (",i.success||0,")"]}),(0,s.jsxs)("option",{value:"warning",children:["Warning (",i.warning||0,")"]}),(0,s.jsxs)("option",{value:"error",children:["Error (",i.error||0,")"]})]}),(0,s.jsxs)("select",{value:void 0===n.read?"":n.read?"read":"unread",onChange:e=>{"read"===e.target.value?r(!0):"unread"===e.target.value?r(!1):r(void 0)},className:"px-3 py-2 border rounded text-sm",children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"read",children:"Read"}),(0,s.jsx)("option",{value:"unread",children:"Unread"})]}),(0,s.jsx)("button",{onClick:a,className:"px-3 py-2 border rounded text-sm hover:bg-gray-100",children:"Reset"})]})}function c(e){let{totalCount:t,unreadCount:r,filteredCount:a,countsByType:i,lastUpdated:n,isPolling:o}=e;return(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"Notification Stats"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Total"}),(0,s.jsx)("div",{className:"text-xl font-semibold",children:t})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Unread"}),(0,s.jsx)("div",{className:"text-xl font-semibold text-blue-600",children:r})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Filtered"}),(0,s.jsx)("div",{className:"text-xl font-semibold",children:a})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Status"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:(0,s.jsx)("span",{className:"inline-flex items-center ".concat(o?"text-green-600":"text-gray-600"),children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"relative flex h-3 w-3 mr-2",children:[(0,s.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),"Polling Active"]}):"Polling Inactive"})})]})]}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Info"}),(0,s.jsx)("div",{className:"text-xl font-semibold text-blue-600",children:i.info||0})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Success"}),(0,s.jsx)("div",{className:"text-xl font-semibold text-green-600",children:i.success||0})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Warning"}),(0,s.jsx)("div",{className:"text-xl font-semibold text-yellow-600",children:i.warning||0})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Error"}),(0,s.jsx)("div",{className:"text-xl font-semibold text-red-600",children:i.error||0})]})]}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",n]})]})}function d(){let{notifications:e,unreadCount:t,markAsRead:r,markAllAsRead:d,deleteNotification:u,addNotification:m,clearAllNotifications:x,refreshNotifications:f,isLoading:h,error:p,lastUpdated:g}=(0,i.zn)(),{refresh:N,stopPolling:b,startPolling:y,isPolling:v}=(0,i.uj)({interval:3e4,enabled:!1,retryCount:3,retryDelay:2e3}),{clearStorage:j}=(0,i.v3)({storageKey:"advanced-demo-notifications",useSessionStorage:!1}),{filteredNotifications:w,filterByReadStatus:C,filterByType:k,filterBySearch:D,resetFilters:E,countsByType:T,filters:A}=(0,i.Bt)(),{groupedNotifications:S,groups:I}=(0,i.HH)(),[_,O]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),[L,F]=(0,a.useState)(!1),[M,B]=(0,a.useState)(""),U=e=>{m({id:"test-".concat(Date.now()),title:"Test ".concat(e," notification"),message:"This is a test ".concat(e," notification created at ").concat(new Date().toLocaleTimeString()),timestamp:new Date,read:!1,type:e})};return(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Advanced Notification Demo"}),(0,s.jsx)(n,{unreadCount:t,onClick:()=>O(!_),isOpen:_,onClose:()=>O(!1),notifications:e,markAsRead:r,markAllAsRead:d,deleteNotification:u,isLoading:h,error:p})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"Controls"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>f(),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"Refresh"}),(0,s.jsx)("button",{onClick:()=>{P?(b(),R(!1)):(y(),R(!0))},className:"px-3 py-1 ".concat(P?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"," text-white rounded text-sm"),children:P?"Stop Polling":"Start Polling"}),(0,s.jsx)("button",{onClick:()=>d(),className:"px-3 py-1 bg-purple-500 text-white rounded hover:bg-purple-600 text-sm",disabled:0===t,children:"Mark All Read"}),(0,s.jsx)("button",{onClick:()=>{E(),B(""),x(),j()},className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm",children:"Reset All"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"Create Test Notification"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>U("info"),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"Info"}),(0,s.jsx)("button",{onClick:()=>U("success"),className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"Success"}),(0,s.jsx)("button",{onClick:()=>U("warning"),className:"px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 text-sm",children:"Warning"}),(0,s.jsx)("button",{onClick:()=>U("error"),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Error"})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"Filters & Display"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",placeholder:"Search notifications...",value:M,onChange:e=>{let t=e.target.value;B(t),D(t)},className:"w-full px-3 py-2 border rounded"})}),(0,s.jsx)(l,{filterByType:k,filterByReadStatus:C,resetFilters:E,countsByType:T,currentFilters:A}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:L,onChange:()=>F(!L),className:"sr-only peer"}),(0,s.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),(0,s.jsx)("span",{className:"ms-3 text-sm font-medium",children:"Group by Date"})]})})]})]}),(0,s.jsx)(c,{totalCount:e.length,unreadCount:t,filteredCount:w.length,countsByType:T,lastUpdated:g?(0,i.i$)(g):"Never",isPolling:P})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:L?"Grouped Notifications":"Filtered Notifications"}),(0,s.jsx)(o,{notifications:L?null:w,groupedNotifications:L?S:null,groups:L?I:null,markAsRead:r,deleteNotification:u,isLoading:h,error:p})]})]})}let u=[{id:"1",title:"Welcome to the app",message:"Thanks for trying out our notification system!",timestamp:new Date(Date.now()-3e5),read:!1,type:"info"},{id:"2",title:"New feature available",message:"Check out our new dashboard features.",timestamp:new Date(Date.now()-36e5),read:!0,type:"info"},{id:"3",title:"Action required",message:"Please verify your email address.",timestamp:new Date(Date.now()-72e5),read:!1,type:"warning"},{id:"4",title:"Payment successful",message:"Your subscription has been renewed.",timestamp:new Date(Date.now()-864e5),read:!0,type:"success"},{id:"5",title:"Login attempt",message:"A new login was detected from an unknown device.",timestamp:new Date(Date.now()-1728e5),read:!1,type:"error"},{id:"6",title:"System update",message:"The system will be down for maintenance tonight.",timestamp:new Date(Date.now()-2592e5),read:!0,type:"warning"},{id:"7",title:"New message",message:"You have a new message from the support team.",timestamp:new Date(Date.now()-3456e5),read:!1,type:"info"},{id:"8",title:"Account update",message:"Your account details have been updated.",timestamp:new Date(Date.now()-432e6),read:!0,type:"success"}];async function m(){if(await new Promise(e=>setTimeout(e,500)),.1>Math.random())throw Error("Failed to fetch notifications");return[...u]}async function x(e){await new Promise(e=>setTimeout(e,300)),u=u.map(t=>t.id===e?{...t,read:!0}:t)}async function f(){await new Promise(e=>setTimeout(e,300)),u=u.map(e=>({...e,read:!0}))}async function h(e){await new Promise(e=>setTimeout(e,300)),u=u.filter(t=>t.id!==e)}function p(){return(0,s.jsx)("main",{className:"min-h-screen p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Advanced Notification Example"}),(0,s.jsx)(i.JB,{fetchNotifications:m,onMarkAsRead:x,onMarkAllAsRead:f,onDeleteNotification:h,fetchOptions:{retryCount:3,retryDelay:1e3,timeout:5e3},children:(0,s.jsx)(d,{})})]})})}},8227:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNotifications=t.NotificationProvider=void 0;let s=r(7437),a=r(2265),i=r(1065),n={notifications:[],unreadCount:0,isLoading:!1,error:null,lastUpdated:null},o=(0,a.createContext)(void 0);function l(e,t){switch(t.type){case"FETCH_NOTIFICATIONS_REQUEST":return{...e,isLoading:!0,error:null};case"FETCH_NOTIFICATIONS_SUCCESS":return{...e,notifications:t.payload,unreadCount:t.payload.filter(e=>!e.read).length,isLoading:!1,error:null,lastUpdated:new Date};case"FETCH_NOTIFICATIONS_FAILURE":return{...e,isLoading:!1,error:t.payload};case"ADD_NOTIFICATION":return{...e,notifications:[t.payload,...e.notifications],unreadCount:e.unreadCount+(t.payload.read?0:1),lastUpdated:new Date};case"MARK_AS_READ":return{...e,notifications:e.notifications.map(e=>e.id===t.payload?{...e,read:!0}:e),unreadCount:e.unreadCount-(e.notifications.find(e=>e.id===t.payload&&!e.read)?1:0),lastUpdated:new Date};case"MARK_ALL_AS_READ":return{...e,notifications:e.notifications.map(e=>({...e,read:!0})),unreadCount:0,lastUpdated:new Date};case"DELETE_NOTIFICATION":let r=e.notifications.find(e=>e.id===t.payload);return{...e,notifications:e.notifications.filter(e=>e.id!==t.payload),unreadCount:e.unreadCount-(r&&!r.read?1:0),lastUpdated:new Date};case"CLEAR_ALL_NOTIFICATIONS":return{...e,notifications:[],unreadCount:0,lastUpdated:new Date};default:return e}}t.NotificationProvider=e=>{let{children:t,fetchNotifications:r,onMarkAsRead:c,onMarkAllAsRead:d,onDeleteNotification:u,fetchOptions:m={retryCount:3,retryDelay:1e3,timeout:1e4},initialState:x={}}=e,[f,h]=(0,a.useReducer)(l,{...n,...x}),p=(0,a.useRef)(m);(0,a.useEffect)(()=>{p.current=m},[m]),(0,a.useEffect)(()=>{r&&g()},[r]);let g=(0,a.useCallback)(async()=>{if(r)try{h({type:"FETCH_NOTIFICATIONS_REQUEST"});let e=await (0,i.fetchWithRetry)(r,p.current);h({type:"FETCH_NOTIFICATIONS_SUCCESS",payload:e})}catch(e){h({type:"FETCH_NOTIFICATIONS_FAILURE",payload:e instanceof Error?e.message:"Failed to fetch notifications"})}},[r]),N=(0,a.useCallback)(async e=>{if(c)try{await c(e)}catch(e){throw console.error("Error marking notification as read:",e),e}h({type:"MARK_AS_READ",payload:e})},[c]),b=(0,a.useCallback)(async()=>{if(d)try{await d()}catch(e){throw console.error("Error marking all notifications as read:",e),e}h({type:"MARK_ALL_AS_READ"})},[d]),y=(0,a.useCallback)(async e=>{if(u)try{await u(e)}catch(e){throw console.error("Error deleting notification:",e),e}h({type:"DELETE_NOTIFICATION",payload:e})},[u]),v=(0,a.useCallback)(e=>{h({type:"ADD_NOTIFICATION",payload:e})},[]),j=(0,a.useCallback)(()=>{h({type:"CLEAR_ALL_NOTIFICATIONS"})},[]),w=(0,a.useCallback)(async()=>{await g()},[g]),C={...f,addNotification:v,markAsRead:N,markAllAsRead:b,deleteNotification:y,clearAllNotifications:j,refreshNotifications:w};return(0,s.jsx)(o.Provider,{value:C,children:t})},t.useNotifications=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}},9796:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNotificationFilters=void 0;let s=r(2265),a=r(8227),i=r(1065);t.useNotificationFilters=()=>{let{notifications:e}=(0,a.useNotifications)(),[t,r]=(0,s.useState)({}),n=(0,s.useMemo)(()=>(0,i.filterNotifications)(e,t),[e,t]),o=(0,s.useCallback)(e=>{r(t=>({...t,read:e}))},[]),l=(0,s.useCallback)(e=>{r(t=>({...t,type:e}))},[]),c=(0,s.useCallback)(e=>{r(t=>({...t,search:e}))},[]);return{filters:t,filteredNotifications:n,filterByReadStatus:o,filterByType:l,filterBySearch:c,filterByDateRange:(0,s.useCallback)((e,t)=>{r(r=>({...r,fromDate:e,toDate:t}))},[]),resetFilters:(0,s.useCallback)(()=>{r({})},[]),countsByType:(0,s.useMemo)(()=>e.reduce((e,t)=>{let r=t.type||"default";return e[r]=(e[r]||0)+1,e},{}),[e]),totalCount:e.length,filteredCount:n.length,unreadCount:e.filter(e=>!e.read).length}}},6195:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNotificationGroups=void 0;let s=r(2265),a=r(8227),i=r(1065);t.useNotificationGroups=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.groupNotificationsByDate,{notifications:t}=(0,a.useNotifications)(),r=(0,s.useMemo)(()=>e(t),[t,e]),n=(0,s.useMemo)(()=>Object.keys(r),[r]);return{groupedNotifications:r,groups:n,getNotificationsForGroup:e=>r[e]||[],groupedByType:(0,s.useMemo)(()=>t.reduce((e,t)=>{let r=t.type||"default";return e[r]||(e[r]=[]),e[r].push(t),e},{}),[t])}}},7520:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNotificationPolling=void 0;let s=r(2265),a=r(8227),i=r(1065);t.useNotificationPolling=function(){let{enabled:e=!0,interval:t=6e4,onError:r,retryCount:n=3,retryDelay:o=1e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{refreshNotifications:l}=(0,a.useNotifications)(),c=(0,s.useRef)(null),d=(0,s.useRef)(e),u=(0,s.useCallback)(async()=>{try{await (0,i.fetchWithRetry)(l,{retryCount:n,retryDelay:o})}catch(e){r?r(e):console.error("Error polling notifications:",e)}},[l,n,o,r]);return(0,s.useEffect)(()=>(d.current=e,e&&(u(),c.current=setInterval(u,t)),()=>{c.current&&(clearInterval(c.current),c.current=null)}),[e,t,u]),{refresh:u,stopPolling:(0,s.useCallback)(()=>{d.current=!1,c.current&&(clearInterval(c.current),c.current=null)},[]),startPolling:(0,s.useCallback)(()=>{d.current=!0,c.current&&clearInterval(c.current),u(),c.current=setInterval(u,t)},[u,t]),isPolling:()=>d.current}}},2615:function(e,t,r){"use strict";let s;Object.defineProperty(t,"__esModule",{value:!0}),t.useNotificationStorage=void 0;let a=r(2265),i=r(8227),n=(s={},{getItem:e=>{var t;return null!==(t=s[e])&&void 0!==t?t:null},setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}});t.useNotificationStorage=function(){let{storageKey:e="notifications",useSessionStorage:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{notifications:r,addNotification:s,markAsRead:o,markAllAsRead:l,deleteNotification:c,clearAllNotifications:d}=(0,i.useNotifications)(),[u,m]=(0,a.useState)(n);return(0,a.useEffect)(()=>{m(t?sessionStorage:localStorage)},[t]),(0,a.useEffect)(()=>{try{let t=u.getItem(e);t&&JSON.parse(t).forEach(e=>{s(e)})}catch(e){console.error("Error loading notifications from storage:",e)}},[u,e,s]),(0,a.useEffect)(()=>{try{u.setItem(e,JSON.stringify(r))}catch(e){console.error("Error saving notifications to storage:",e)}},[r,u,e]),{addNotification:async e=>{s(e)},markAsRead:async e=>{await o(e)},markAllAsRead:async()=>{await l()},deleteNotification:async e=>{await c(e)},clearAllNotifications:()=>{d()},clearStorage:()=>{u.removeItem(e)}}}},3667:function(e,t,r){"use strict";t.i$=t.HH=t.Bt=t.v3=t.uj=t.zn=t.JB=void 0;var s=r(8227);Object.defineProperty(t,"JB",{enumerable:!0,get:function(){return s.NotificationProvider}}),Object.defineProperty(t,"zn",{enumerable:!0,get:function(){return s.useNotifications}});var a=r(7520);Object.defineProperty(t,"uj",{enumerable:!0,get:function(){return a.useNotificationPolling}});var i=r(2615);Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.useNotificationStorage}});var n=r(9796);Object.defineProperty(t,"Bt",{enumerable:!0,get:function(){return n.useNotificationFilters}});var o=r(6195);Object.defineProperty(t,"HH",{enumerable:!0,get:function(){return o.useNotificationGroups}});var l=r(1065);Object.defineProperty(t,"i$",{enumerable:!0,get:function(){return l.formatTimestamp}})},1065:function(e,t){"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{retryCount:r=3,retryDelay:s=1e3,timeout:a=1e4}=t,i=null;for(let t=0;t<=r;t++)try{let t=new Promise((e,t)=>{setTimeout(()=>{t(Error("Request timed out after ".concat(a,"ms")))},a)});return await Promise.race([e(),t])}catch(a){if(i=a instanceof Error?a:Error(String(a)),t===r)throw i;let e=s*Math.pow(2,t);await new Promise(t=>setTimeout(t,e))}throw i||Error("Unknown error during fetch with retry")}Object.defineProperty(t,"__esModule",{value:!0}),t.filterNotifications=t.groupNotificationsByDate=t.formatTimestamp=t.fetchWithRetry=void 0,t.fetchWithRetry=r,t.formatTimestamp=function(e){let t="string"==typeof e?new Date(e):e,r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"just now";if(r<3600){let e=Math.floor(r/60);return"".concat(e," ").concat(1===e?"minute":"minutes"," ago")}if(r<86400){let e=Math.floor(r/3600);return"".concat(e," ").concat(1===e?"hour":"hours"," ago")}{if(!(r<604800))return t.toLocaleDateString();let e=Math.floor(r/86400);return"".concat(e," ").concat(1===e?"day":"days"," ago")}},t.groupNotificationsByDate=function(e){return e.reduce((e,t)=>{let r=("string"==typeof t.timestamp?new Date(t.timestamp):t.timestamp).toDateString();return e[r]||(e[r]=[]),e[r].push(t),e},{})},t.filterNotifications=function(e,t){return e.filter(e=>{var r,s;if(void 0!==t.read&&e.read!==t.read||t.type&&e.type!==t.type)return!1;if(t.search){let a=t.search.toLowerCase(),i=null===(r=e.title)||void 0===r?void 0:r.toLowerCase().includes(a),n=null===(s=e.message)||void 0===s?void 0:s.toLowerCase().includes(a);if(!i&&!n)return!1}if(t.fromDate||t.toDate){let r="string"==typeof e.timestamp?new Date(e.timestamp):e.timestamp;if(t.fromDate&&r<t.fromDate)return!1;if(t.toDate){let e=new Date(t.toDate);if(e.setDate(e.getDate()+1),r>e)return!1}}return!0})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1196)}),_N_E=e.O()}]);