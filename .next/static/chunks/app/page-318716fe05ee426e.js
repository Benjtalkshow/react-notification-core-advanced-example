(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1196:function(e,t,s){Promise.resolve().then(s.bind(s,8964))},8964:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),r=s(2265),n=s(6175);function i(e){let{unreadCount:t,onClick:s,isOpen:n,onClose:i,notifications:l,markAsRead:d,markAllAsRead:c,deleteNotification:o,isLoading:x,error:m}=e,u=(0,r.useRef)(null);(0,r.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&i()}return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n,i]);let h=e=>("string"==typeof e?new Date(e):e).toLocaleString(),p=e=>{switch(e){case"success":return"border-l-4 border-green-500";case"warning":return"border-l-4 border-yellow-500";case"error":return"border-l-4 border-red-500";default:return"border-l-4 border-blue-500"}};return(0,a.jsxs)("div",{className:"relative",ref:u,children:[(0,a.jsxs)("button",{onClick:s,className:"relative p-2 text-gray-700 hover:bg-gray-100 rounded-full","aria-label":"Notifications",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,a.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),t>0&&(0,a.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:t>99?"99+":t})]}),n&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg z-10",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Notifications"}),t>0&&(0,a.jsx)("button",{onClick:()=>c(),className:"text-sm text-blue-500 hover:text-blue-700",children:"Mark all as read"})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:x?(0,a.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading notifications..."}):m?(0,a.jsxs)("div",{className:"p-4 text-center text-red-500",children:["Error: ",m]}):0===l.length?(0,a.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):(0,a.jsx)("ul",{children:l.map(e=>(0,a.jsxs)("li",{className:"p-4 border-b ".concat(e.read?"":"bg-blue-50"," ").concat(p(e.type)),children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:h(e.timestamp)})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,a.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[!e.read&&(0,a.jsx)("button",{onClick:()=>d(e.id),className:"text-xs text-blue-500 hover:text-blue-700",children:"Mark as read"}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},e.id))})})]})]})}function l(e){let{notifications:t,groupedNotifications:s,groups:r,markAsRead:n,deleteNotification:i,isLoading:l,error:d}=e,c=e=>("string"==typeof e?new Date(e):e).toLocaleString(),o=e=>{switch(e){case"success":return"border-l-4 border-green-500";case"warning":return"border-l-4 border-yellow-500";case"error":return"border-l-4 border-red-500";default:return"border-l-4 border-blue-500"}},x=e=>{switch(e){case"success":return(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Success"});case"warning":return(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Warning"});case"error":return(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"Error"});default:return(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"Info"})}};return l?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading notifications..."}):d?(0,a.jsxs)("div",{className:"p-8 text-center text-red-500",children:["Error: ",d]}):s&&r?0===r.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No notifications"}):(0,a.jsx)("div",{className:"space-y-6",children:r.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-100 px-4 py-2 font-medium",children:e}),(0,a.jsx)("ul",{className:"divide-y",children:s[e].map(e=>(0,a.jsxs)("li",{className:"p-4 ".concat(e.read?"":"bg-blue-50"," ").concat(o(e.type)),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.title}),x(e.type)]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:c(e.timestamp)})]}),(0,a.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[!e.read&&(0,a.jsx)("button",{onClick:()=>n(e.id),className:"text-xs text-blue-500 hover:text-blue-700",children:"Mark as read"}),(0,a.jsx)("button",{onClick:()=>i(e.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},e.id))})]},e))}):t?0===t.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No notifications"}):(0,a.jsx)("ul",{className:"border rounded-lg overflow-hidden divide-y",children:t.map(e=>(0,a.jsxs)("li",{className:"p-4 ".concat(e.read?"":"bg-blue-50"," ").concat(o(e.type)),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.title}),x(e.type)]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:c(e.timestamp)})]}),(0,a.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[!e.read&&(0,a.jsx)("button",{onClick:()=>n(e.id),className:"text-xs text-blue-500 hover:text-blue-700",children:"Mark as read"}),(0,a.jsx)("button",{onClick:()=>i(e.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},e.id))}):null}function d(e){let{filterByType:t,filterByReadStatus:s,resetFilters:r,countsByType:n,currentFilters:i}=e;return(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:i.type||"",onChange:e=>t(e.target.value||void 0),className:"px-3 py-2 border rounded text-sm",children:[(0,a.jsx)("option",{value:"",children:"All Types"}),(0,a.jsxs)("option",{value:"info",children:["Info (",n.info||0,")"]}),(0,a.jsxs)("option",{value:"success",children:["Success (",n.success||0,")"]}),(0,a.jsxs)("option",{value:"warning",children:["Warning (",n.warning||0,")"]}),(0,a.jsxs)("option",{value:"error",children:["Error (",n.error||0,")"]})]}),(0,a.jsxs)("select",{value:void 0===i.read?"":i.read?"read":"unread",onChange:e=>{"read"===e.target.value?s(!0):"unread"===e.target.value?s(!1):s(void 0)},className:"px-3 py-2 border rounded text-sm",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"read",children:"Read"}),(0,a.jsx)("option",{value:"unread",children:"Unread"})]}),(0,a.jsx)("button",{onClick:r,className:"px-3 py-2 border rounded text-sm hover:bg-gray-100",children:"Reset"})]})}function c(e){let{totalCount:t,unreadCount:s,filteredCount:r,countsByType:n,lastUpdated:i,isPolling:l}=e;return(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Notification Stats"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:t})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Unread"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-blue-600",children:s})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Filtered"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:r})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Status"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:(0,a.jsx)("span",{className:"inline-flex items-center ".concat(l?"text-green-600":"text-gray-600"),children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"relative flex h-3 w-3 mr-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),"Polling Active"]}):"Polling Inactive"})})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Info"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-blue-600",children:n.info||0})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Success"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-green-600",children:n.success||0})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Warning"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-yellow-600",children:n.warning||0})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Error"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-red-600",children:n.error||0})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",i]})]})}function o(){let{notifications:e,unreadCount:t,markAsRead:s,markAllAsRead:o,deleteNotification:x,addNotification:m,clearAllNotifications:u,refreshNotifications:h,isLoading:p,error:g,lastUpdated:f}=(0,n.zn)(),{refresh:b,stopPolling:j,startPolling:N,isPolling:v}=(0,n.uj)({interval:3e4,enabled:!1,retryCount:3,retryDelay:2e3}),{clearStorage:w}=(0,n.v3)({storageKey:"advanced-demo-notifications",useSessionStorage:!1}),{filteredNotifications:y,filterByReadStatus:k,filterByType:C,filterBySearch:D,resetFilters:S,countsByType:A,filters:T}=(0,n.Bt)(),{groupedNotifications:E,groups:L}=(0,n.HH)(),[P,R]=(0,r.useState)(!1),[M,B]=(0,r.useState)(!1),[F,W]=(0,r.useState)(!1),[_,I]=(0,r.useState)(""),O=e=>{m({id:"test-".concat(Date.now()),title:"Test ".concat(e," notification"),message:"This is a test ".concat(e," notification created at ").concat(new Date().toLocaleTimeString()),timestamp:new Date,read:!1,type:e})};return(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Advanced Notification Demo"}),(0,a.jsx)(i,{unreadCount:t,onClick:()=>R(!P),isOpen:P,onClose:()=>R(!1),notifications:e,markAsRead:s,markAllAsRead:o,deleteNotification:x,isLoading:p,error:g})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Controls"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>h(),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"Refresh"}),(0,a.jsx)("button",{onClick:()=>{M?(j(),B(!1)):(N(),B(!0))},className:"px-3 py-1 ".concat(M?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"," text-white rounded text-sm"),children:M?"Stop Polling":"Start Polling"}),(0,a.jsx)("button",{onClick:()=>o(),className:"px-3 py-1 bg-purple-500 text-white rounded hover:bg-purple-600 text-sm",disabled:0===t,children:"Mark All Read"}),(0,a.jsx)("button",{onClick:()=>{S(),I(""),u(),w()},className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm",children:"Reset All"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Create Test Notification"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>O("info"),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"Info"}),(0,a.jsx)("button",{onClick:()=>O("success"),className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"Success"}),(0,a.jsx)("button",{onClick:()=>O("warning"),className:"px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 text-sm",children:"Warning"}),(0,a.jsx)("button",{onClick:()=>O("error"),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Error"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Filters & Display"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search notifications...",value:_,onChange:e=>{let t=e.target.value;I(t),D(t)},className:"w-full px-3 py-2 border rounded"})}),(0,a.jsx)(d,{filterByType:C,filterByReadStatus:k,resetFilters:S,countsByType:A,currentFilters:T}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:F,onChange:()=>W(!F),className:"sr-only peer"}),(0,a.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),(0,a.jsx)("span",{className:"ms-3 text-sm font-medium",children:"Group by Date"})]})})]})]}),(0,a.jsx)(c,{totalCount:e.length,unreadCount:t,filteredCount:y.length,countsByType:A,lastUpdated:f?(0,n.i$)(f):"Never",isPolling:M})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:F?"Grouped Notifications":"Filtered Notifications"}),(0,a.jsx)(l,{notifications:F?null:y,groupedNotifications:F?E:null,groups:F?L:null,markAsRead:s,deleteNotification:x,isLoading:p,error:g})]})]})}let x=[{id:"1",title:"Welcome to the app",message:"Thanks for trying out our notification system!",timestamp:new Date(Date.now()-3e5),read:!1,type:"info"},{id:"2",title:"New feature available",message:"Check out our new dashboard features.",timestamp:new Date(Date.now()-36e5),read:!0,type:"info"},{id:"3",title:"Action required",message:"Please verify your email address.",timestamp:new Date(Date.now()-72e5),read:!1,type:"warning"},{id:"4",title:"Payment successful",message:"Your subscription has been renewed.",timestamp:new Date(Date.now()-864e5),read:!0,type:"success"},{id:"5",title:"Login attempt",message:"A new login was detected from an unknown device.",timestamp:new Date(Date.now()-1728e5),read:!1,type:"error"},{id:"6",title:"System update",message:"The system will be down for maintenance tonight.",timestamp:new Date(Date.now()-2592e5),read:!0,type:"warning"},{id:"7",title:"New message",message:"You have a new message from the support team.",timestamp:new Date(Date.now()-3456e5),read:!1,type:"info"},{id:"8",title:"Account update",message:"Your account details have been updated.",timestamp:new Date(Date.now()-432e6),read:!0,type:"success"}];async function m(){if(await new Promise(e=>setTimeout(e,500)),.1>Math.random())throw Error("Failed to fetch notifications");return[...x]}async function u(e){await new Promise(e=>setTimeout(e,300)),x=x.map(t=>t.id===e?{...t,read:!0}:t)}async function h(){await new Promise(e=>setTimeout(e,300)),x=x.map(e=>({...e,read:!0}))}async function p(e){await new Promise(e=>setTimeout(e,300)),x=x.filter(t=>t.id!==e)}function g(){return(0,a.jsx)("main",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Advanced Notification Example"}),(0,a.jsx)(n.JB,{fetchNotifications:m,onMarkAsRead:u,onMarkAllAsRead:h,onDeleteNotification:p,fetchOptions:{retryCount:3,retryDelay:1e3,timeout:5e3},children:(0,a.jsx)(o,{})})]})})}}},function(e){e.O(0,[175,971,117,744],function(){return e(e.s=1196)}),_N_E=e.O()}]);